trigger:

- none

pool:
  vmImage: ubuntu-latest

variables:
  - group: SCA

steps:
- script: |
    ubuntu_release=`lsb_release -rs`
    wget https://packages.microsoft.com/config/ubuntu/${ubuntu_release}/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
    sudo dpkg -i packages-microsoft-prod.deb
    sudo apt-get install apt-transport-https
    sudo apt-get update
    sudo apt-get install openjdk-23
  displayName: 'Install Java 23'

- bash: |
    mvn spotless:apply
    mvn -N wrapper:wrapper
    chmod +x ./mvnw

- task: BlackDuckSecurityScan@2
  inputs:
    scanType: 'blackducksca'
    blackduckScaUrl: '$(SCA_URL)'
    blackduckScaToken: '$(SCA_ACCESS_TOKEN)'